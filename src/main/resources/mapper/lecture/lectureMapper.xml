<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.learn.forwiz.lecture.mapper.LectureMapper">

	<select id="selectLectureList" resultType="com.learn.forwiz.lecture.vo.LectureVO" parameterType="com.learn.forwiz.lecture.vo.LectureVO">
        SELECT *
             , COUNT(*) OVER() AS "totalRecordCnt"
          FROM TB_LECTURE
         WHERE 1=1
    	<if test="lectureNm != null and lectureNm != ''">    	
           AND LOWER(LECTURE_NM) LIKE '%'||LOWER(#{lectureNm})||'%'
    	</if>
    	<if test="difficultyArray != null and difficultyArray.length != 0">
    	   AND difficulty IN
    		<foreach item="item" collection="difficultyArray" open="(" separator="," close=")">
    		   #{item}
    		</foreach>
    	</if>
    	<if test="minPrice != null and minPrice != ''">
    	   AND price <![CDATA[>=]]> #{minPrice}::NUMERIC
    	</if>
    	<if test="maxPrice != null and maxPrice != ''">
    	   AND price <![CDATA[<=]]> #{maxPrice}::NUMERIC
    	</if>  	
	</select>
	
	<select id="selectLectureDetail" parameterType="String" resultType="com.learn.forwiz.lecture.vo.LectureVO">
	    SELECT *
          FROM TB_LECTURE
	     WHERE LECTURE_NO = #{lectureNo}::NUMERIC
	</select>

</mapper>